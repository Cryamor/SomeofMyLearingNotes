## 零知识证明 Zero-knowledge Proof

零知识证明（Zero-Knowledge Proof，ZKP）是一种密码学协议，它允许一方向另一方证明某个陈述是正确的，而无需提供除了该陈述真实性之外的任何信息。换句话说，它允许 **证明者（Prover）** 向 **验证者（Verifier）** 证明他们拥有某个秘密信息，而无需透露这个信息本身。

零知识证明具有三个关键特性：
1. 完整性（Completeness）：如果证明者拥有正确的信息，那么验证者应该能够被说服该陈述是正确的。
2. 稳健性（Soundness）：如果证明者没有正确的信息，那么即使他尝试欺骗，验证者也不会被说服该陈述是正确的。
3. 零知识（Zero-Knowledge）：即使验证者被说服该陈述是正确的，他们也无法从中获得任何额外的信息。

零知识证明的应用非常广泛，包括但不限于：
- 身份验证：用户可以证明他们知道某个密码，而无需实际透露密码。
- 数字签名：确保签名的真实性，而无需透露签名的私钥。
- 区块链技术：在某些区块链系统中，零知识证明可以用来保护交易的隐私，同时确保交易的有效性。
- 隐私保护：在需要验证某些属性或条件时，保护用户的隐私不被泄露。

零知识证明的实现方式多种多样，包括基于哈希函数、基于同态加密、基于椭圆曲线密码学等。随着密码学和计算机科学的发展，零知识证明技术也在不断进步，例如，zk-SNARKs（Zero-Knowledge Succinct Non-Interactive Argument of Knowledge）和zk-STARKs（Zero-Knowledge Scalable Transparent ARguments of Knowledge）是两种较为先进的零知识证明系统，它们在效率和可扩展性方面有所提升。

### ZKP示例

#### The Ali Baba cave 阿里巴巴洞穴


#### Two balls and the colour-blind friend 两个球和色盲朋友

你的朋友是红绿色盲（而你不是），你有两个球：一个红色和一个绿色，但其他方面相同。对朋友来说，这些球似乎完全一样。朋友怀疑这些球是否真的可以区分。你想向朋友证明这些球实际上是不同的颜色，但没有别的。特别是，你不想透露哪个球是红色的，哪个是绿色的。
你把两个球给朋友，他把它们放在背后。接下来，他将其中一个球从背后拿出来展示。然后他再次将球放在背后，然后再次选择只展示两个球中的一个，随后问你”我换球了么“(朋友当然知道是否换球)。
如果你不是色盲，则一定能正确指出是否换球，如果你无法区分颜色，则猜对结果的概率为50%。
随后多次重复上述过程，由于你随机成功识别每次是否换球的概率为50%，因此随机成功识别所有的概率接近于零（“稳健性”）。如果你和你的朋友多次重复这个 “证明” （例如20次），你的朋友应该相信 （“完整性”） 这些球确实是不同的颜色。
上述证明是“零知识”的，因为你的朋友永远不知道哪个球是绿色的，哪个是红色的;事实上，他没有获得如何区分球的知识。

## zkSNARK
一种新的密码学工具，可以针对任何问题高效生成零知识协议

将问题转化为函数：
f(x, w) = True / False
x - 公钥
w - 私钥

将函数转换为等效的R1CS方程组

e.g.
函数输入 x1, x2, x3, x4
OUT = f(x) = (x1 + x2) * x3 - x4
知道一些秘密(x1, x2, x3, x4)和函数计算结果OUT，利用签名可以证明存在这样的秘密，但不需要告知秘密是什么

y1 := x1 + x2
y2 := y1 * x3
OUT := y2 - x4

证明器输入 x1, x2, x3, x4, y1, y2, OUT
输出约束，仅当满足约束时证明签名：
y1 == x1 + x2
y2 == y1 * x3
y2 == OUT + x4